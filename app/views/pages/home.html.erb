
<%= link_to "COMPOSE", new_review_path %>
<%= link_to "LIST", new_list_path %>


<%# Sorted by latest %>
<% @reviews.each do |r| %>
<div class="container">
        <div class="title">
            <p>
            <%= r.title %>
            </p>
        </div>
        <div class="user">
        <p>
            @<%= r.user.username %>
        </p>
        </div>
        <div class="content">
        <p>
            <%= r.rating %>
        </p>
        </div>
        <div class="create_time">
            <p>
            <%= r.created_at.strftime("%H:%M, %Y-%m-%d") %>
            </p>
        </div>
    <div class="edit">
        <% if @current_user.id == r.user.id%>
        <%= link_to "DELETE", review_path(r.id), method:'delete' %>
    <% end %>
    </div>
</div>
<% end %>

<% @lists.each do |r| %>

<div class="container">
        <div class="title">
            <p>
                <%= r.title %>
            </p>
        </div>
        <div class="user">
        <% if r.users.count > 1 %>
            <p>
            @<%= r.users.pluck(:username).first%>+<%= r.users.count.-(1) %>
            </p>
            <% else %>
            @<%= r.users.pluck(:username).join %>
            <% end  %>
        </div>
        <div class="content">
        <% if r.reviews.count == 0 %>
          <p>this list is empty</p>
          <% else %>
            <p>
            this list contains:
            <%= r.reviews.pluck(:title).join ', ' %>
            </p>
        <% end %>
        </div>
        <div class="create_time">
            <p>
            published: 
            <%= r.created_at.strftime("%H:%M %Y-%m-%d") %>
            </p>
        </div>
        <div class="edit">
            <%= link_to "DELETE", list_path(r.id), method:'delete' %>
        </div>
</div>

<% end %>


